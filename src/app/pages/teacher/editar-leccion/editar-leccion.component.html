<div class="container-fluid g-0">

  <app-topbar-teacher (navbarMenu)="navbarStatus = $event;" class="fixed-topbar"></app-topbar-teacher>
  <main>

    <app-navbar-teacher [navbarStatus]="navbarStatus" [ngClass]="{'app-side-nav-open': navbarStatus}"
      class="fixed-side-nav"></app-navbar-teacher>

    <div class="display-area p-3" [ngClass]="{'display-area-shrink': navbarStatus}">
      <h2 class="mb-4 text-primary">Actualizar Lección</h2>
      <form [formGroup]="leccionForm" (ngSubmit)="updateLeccion()" class="needs-validation p-5 rounded-5 shadow-lg"
        novalidate>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="titulo" class="form-label z-3">Título</label>
            <input type="text" class="form-control rounded-5" id="titulo" formControlName="titulo" required>
            <div class="invalid-feedback">Por favor, ingresa el título.</div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="descripcion" class="form-label text-light-emphasis">Descripción</label>
            <textarea class="form-control rounded-5" id="descripcion" formControlName="descripcion" rows="3"
              required></textarea>
            <div class="invalid-feedback">Por favor, ingresa la descripción.</div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="portada" class="form-label">Portada</label>
            <input type="file" class="form-control rounded-5" id="portada" (change)="onFileSelected($event)">
            <img *ngIf="portadaSeleccionada" [src]="portadaSeleccionada" alt="Portada seleccionada" class="img-fluid mt-3">
          </div>
          <div class="col-md-6 mb-3">
            <label for="tiempoEstimado" class="form-label">Tiempo Estimado (minutos)</label>
            <input type="number" class="form-control rounded-5" id="tiempoEstimado" formControlName="tiempoEstimado"
              required>
            <div class="invalid-feedback">Por favor, ingresa el tiempo estimado.</div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="numeroVidas" class="form-label">Número de Vidas</label>
            <input type="number" class="form-control rounded-5" id="numeroVidas" formControlName="numeroVidas" required>
            <div class="invalid-feedback">Por favor, ingresa el número de vidas.</div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="puntajeTotalEstimado" class="form-label">Puntaje Total Estimado</label>
            <input type="number" class="form-control rounded-5" id="puntajeTotalEstimado"
              formControlName="puntajeTotalEstimado" required>
            <div class="invalid-feedback">Por favor, ingresa el puntaje total estimado.</div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="nivel" class="form-label rounded-5">Nivel</label>
            <select class="form-select" id="nivel" formControlName="nivel" required>
              <option value="" disabled selected>Selecciona el nivel</option>
              <option value="BASICO">BÁSICO</option>
              <option value="INTERMEDIO">INTERMEDIO</option>
              <option value="AVANZADO">AVANZADO</option>
            </select>
            <div class="invalid-feedback">Por favor, selecciona el nivel.</div>
          </div>
          <div class="col-md-6 d-flex align-items-end">
            <button type="submit" class="btn btn-success w-50 btn-transition rounded-pill me-2"> <i
                class="fas fa-edit"></i>Actualizar</button>
          </div>
        </div>
      </form>
    </div>

  </main>
</div>

<style>
  .needs-validation .form-control:invalid,
  .needs-validation .form-select:invalid {
    border-color: #dc3545;
  }

  .needs-validation .form-control:invalid:focus,
  .needs-validation .form-select:invalid:focus {
    border-color: #dc3545;
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
  }

  .btn-transition {
    transition: background-color 0.3s, transform 0.3s;
  }

  .btn-transition:hover {
    background-color: #0056b3;
    transform: scale(1.05);
  }
</style>